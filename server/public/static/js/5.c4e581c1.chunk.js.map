{"version":3,"sources":["components/cart-item/cart-item.component.jsx","components/checkout/checkout.component.jsx","pages/checkoutpage/checkout.page.js"],"names":["CartItem","cartItem","addItem","removeItem","id","name","quantity","price","className","style","display","onClick","Checkout","useState","toHide","setToHide","disabled","setDisabled","cartCtx","useContext","CartContext","userCtx","UserContext","useEffect","cartItems","length","first_name","last_name","email","address","city","phone","state","userProfileData","setUserProfileData","status","orderStatus","setOrderStatus","handleChange","event","target","value","map","item","cartTotal","onSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","json","res","user","cart","orderId","order","order_id","console","log","clearCart","catch","err","placeholder","type","onChange","label","required","to","width","CheckoutPage"],"mappings":"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","file":"static/js/5.c4e581c1.chunk.js","sourcesContent":["import React  from 'react';\r\nimport './cart-item.styles.css'\r\n\r\n\r\nconst CartItem = ({ cartItem, addItem, removeItem }) => {    \r\n    const { id, name, quantity, price } = cartItem;\r\n\r\n    return (\r\n        <div key={id} className=\"rows-container\">\r\n            <div>{name}</div>\r\n            <div style={{display: 'flex'}}>\r\n                <div className=\"arrow-rows\" onClick={() => {removeItem(cartItem)}}>&#10094;</div><span>{quantity}</span><div className=\"arrow-rows\" onClick={() => {addItem(cartItem)}}>&#10095;</div> \r\n            </div>\r\n            <div>$ {price}</div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartItem;","import React, {useState, useContext, useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './checkout.styles.css';\r\n\r\nimport CartItem from '../cart-item/cart-item.component';\r\nimport { CartContext } from '../../context/cartContext/cart.context';\r\nimport { UserContext } from '../../context/userContext/user.context';\r\n\r\nconst Checkout = () => {\r\n\r\n    const [ toHide, setToHide ] = useState(false);\r\n    const [ disabled, setDisabled ] = useState(false);\r\n    const cartCtx = useContext(CartContext);\r\n    const userCtx = useContext(UserContext);\r\n\r\n    useEffect(() => {\r\n        cartCtx.cartItems.length === 0 ? setDisabled(true) : setDisabled(false)\r\n\r\n    },[cartCtx.cartItems])\r\n\r\n\r\n    const [userProfileData, setUserProfileData] = useState({\r\n        first_name: userCtx.first_name, \r\n        last_name: userCtx.last_name,\r\n        email: userCtx.email,\r\n        address: userCtx.address,\r\n        city: userCtx.city,\r\n        phone: userCtx.phone,\r\n        state: userCtx.state,\r\n    })\r\n\r\n    const [orderStatus, setOrderStatus] = useState({status: ''})\r\n\r\n\r\n    const { \r\n        first_name,\r\n        last_name,\r\n        email,\r\n        address,\r\n        city,\r\n        phone,\r\n        state, \r\n    } = userProfileData;\r\n\r\n    const handleChange = event => {\r\n        const { value, name } = event.target;\r\n        setUserProfileData({ ...userProfileData, [name]: value });\r\n      };\r\n\r\n    const sendConf = (user, cart, orderId) => {\r\n        fetch('https://localhost:3001/order/confirmation', {\r\n            method: 'post',\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                user,\r\n                cart,\r\n                orderId,\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((res) => console.log(res))\r\n    }\r\n\r\n    const handlePurchase = (e) => {\r\n        e.preventDefault();\r\n    \r\n        fetch(`https://localhost:3001/order/`, {//https://localhost:3001\r\n                method: 'post',\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    first_name,\r\n                    last_name,\r\n                    email,\r\n                    address,\r\n                    city,\r\n                    phone,\r\n                    state,\r\n                    userCtx,\r\n                    cartCtx,\r\n                })\r\n            })\r\n             .then((response) => response.json())\r\n             .then((res) => {\r\n                if (typeof res.order === 'number') {\r\n                    setOrderStatus({status:\"success\", order_id: res.order});\r\n                    sendConf(userCtx, cartCtx, res.order);\r\n                    cartCtx.clearCart();\r\n                    setToHide(true)\r\n                 } else {\r\n                    setOrderStatus({status: \"failed\"})\r\n                 }}\r\n             ) \r\n             .catch((err) => console.log(\"Error al crear orden, intenta de nuevo\" + err))\r\n               \r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Checkout</h1>\r\n            { toHide ? null : \r\n            <div className=\"sections-container\">\r\n                <div className=\"order-section\">\r\n                    <h3>Pedido</h3>\r\n                    <div className=\"checkout-rows-container\">\r\n                        {cartCtx.cartItems.map((item) => (\r\n                            <CartItem key={item.id} cartItem={item} addItem={cartCtx.addItem} removeItem={cartCtx.removeItem}/>\r\n                    ))}\r\n                    </div>\r\n                    <div className=\"total-container\">\r\n                        <h3>Total </h3>\r\n                        <h3>$ {cartCtx.cartTotal}</h3>\r\n                    </div>\r\n                </div>\r\n                <div className=\"delivery-section\">\r\n                    <h3>Datos de envio</h3>\r\n                    <form onSubmit={handlePurchase} className=\"checkout-container\">\r\n            {/* { updateSuccess ? <h4 style={{color: 'green', margin: '0' }}>Cambios guardados con exito!</h4> : null}\r\n            { error ? <h4 style={{color: 'red', margin: '0' }}>{error}</h4> : null } */}\r\n                    <div className=\"checkout-inputs\">\r\n                        <div className=\"checkout-inputs-container\">\r\n                            <input \r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Nombre\" \r\n                                name='first_name'\r\n                                type='text'\r\n                                onChange={handleChange}\r\n                                value={first_name}\r\n                                label='Nombre'\r\n                                required\r\n                            />\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Apellido\"\r\n                                name='last_name'\r\n                                type='text'\r\n                                value={last_name}\r\n                                onChange={handleChange}\r\n                                label='Apellido'\r\n                                required\r\n                                />                            \r\n                        </div>\r\n                        <div className=\"checkout-inputs-container\">\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Telefono\"\r\n                                name='phone'\r\n                                type='text'\r\n                                value={phone}\r\n                                onChange={handleChange}\r\n                                label='Telefono'\r\n                                required\r\n                            />\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Correo Electronico\"\r\n                                name='email'\r\n                                type='email'\r\n                                value={email}\r\n                                onChange={handleChange}\r\n                                label='Email'\r\n                                disabled\r\n                                />\r\n                            \r\n                            \r\n                        </div>\r\n                        <div className=\"checkout-inputs-container\">\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Direccion\"\r\n                                name='address'\r\n                                type='text'\r\n                                value={address}\r\n                                onChange={handleChange}\r\n                                label='Direccion'\r\n                                />\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Ciudad\"\r\n                                name='city'\r\n                                type='text'\r\n                                value={city}\r\n                                onChange={handleChange}\r\n                                label='ConfirmarPassword'\r\n                                />\r\n                            <input\r\n                                className=\"checkout-input\" \r\n                                placeholder=\"Departamento\"\r\n                                name='state'\r\n                                type='text'\r\n                                value={state}\r\n                                onChange={handleChange}\r\n                                label='Departamento'\r\n                                />\r\n                        </div>\r\n                    </div>\r\n                        <div className=\"checkout-button-container\">\r\n                            <Link to=\"/cart\" style={{width: \"30%\"}}><button className=\"checkout-back-button\">Volver</button></Link>\r\n                            <button className=\"checkout-button\" type=\"submit\" disabled={disabled}>Comprar</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div> }\r\n                    <div>\r\n                        {orderStatus.status === 'success' ? \r\n                            <div className=\"success-message\">\r\n                                <div className=\"success-order-message-1\">Tu pedido ha sido procesado con exito, tu numero de orden es {orderStatus.order_id} </div>\r\n                                <div className=\"success-order-message-2\">Te contactaremos a la brevedad</div>\r\n                            </div> : orderStatus.status === 'failed' ? <h1>Ocurrio un error, intenta mas tarde</h1> : null}\r\n                    </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Checkout;","import React from 'react';\r\nimport './checkout.page.styles.css'\r\nimport Checkout from '../../components/checkout/checkout.component';\r\n\r\nconst CheckoutPage = () => {\r\n    return (\r\n        <div className=\"checkout-page-container\">\r\n            <div className=\"checkout-page-content-container\">\r\n                <Checkout/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CheckoutPage; "],"sourceRoot":""}